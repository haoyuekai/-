<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="format-detection" content="telephone=no, email=no" />
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="HandheldFriendly" content="true">
  <meta name="MobileOptimized" content="320">
  <meta name="screen-orientation" content="portrait">
  <meta name="x5-orientation" content="portrait">
  <meta name="msapplication-tap-highlight" content="no">
  <title>slither</title>
  <style>
    *{margin:0;padding:0;-webkit-user-select: none;}
    html,body,#cas{width:100%;height:100%;overflow: hidden;background-color: #000;}
  </style>
</head>
<body>
<canvas id="cas">您的浏览器太渣啦~ 换电脑吧(๑•̀ㅁ•́ฅ)</canvas>
<script type="text/javascript">
	/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = __webpack_require__(1);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** multi main\n ** module id = 0\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///multi_main?");

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _stats = __webpack_require__(2);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nvar _snake = __webpack_require__(3);\n\nvar _snake2 = _interopRequireDefault(_snake);\n\nvar _food = __webpack_require__(8);\n\nvar _food2 = _interopRequireDefault(_food);\n\nvar _frame = __webpack_require__(6);\n\nvar _frame2 = _interopRequireDefault(_frame);\n\nvar _map = __webpack_require__(5);\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar raf = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n  window.setTimeout(callback, 1000 / 60);\n}; /**\n    * Created by wanghx on 4/23/16.\n    *\n    * main\n    *\n    */\n\nvar canvas = document.getElementById('cas');\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\n\n// fps状态\nvar stats = new _stats2.default();\ndocument.body.appendChild(stats.dom);\n\n// 初始化地图对象\n_map2.default.init({\n  canvas: canvas,\n  width: 10000,\n  height: 10000\n});\n\n// 初始化视窗对象\n_frame2.default.init({\n  x: 1000,\n  y: 1000,\n  width: canvas.width,\n  height: canvas.height\n});\n\n// 创建蛇类对象\nvar snake = new _snake2.default({\n  x: _frame2.default.x + _frame2.default.width / 2,\n  y: _frame2.default.y + _frame2.default.height / 2,\n  size: 40,\n  length: 10,\n  color: '#fff'\n});\n\n// 食物生成方法\nvar foodsNum = 1000;\nvar foods = [];\nfunction createFood(num) {\n  for (var i = 0; i < num; i++) {\n    var point = ~ ~(Math.random() * 30 + 50);\n    var size = ~ ~(point / 3);\n\n    foods.push(new _food2.default({\n      x: ~ ~(Math.random() * (_map2.default.width - 2 * size) + size),\n      y: ~ ~(Math.random() * (_map2.default.height - 2 * size) + size),\n      size: size, point: point\n    }));\n  }\n}\n\n/**\n * 碰撞检测\n * @param dom\n * @param dom2\n * @param isRect   是否为矩形\n */\nfunction collision(dom, dom2, isRect) {\n  var disX = dom.x - dom2.x;\n  var disY = dom.y - dom2.y;\n\n  if (isRect) {\n    return Math.abs(disX) < dom.width + dom2.width && Math.abs(disY) < dom.height + dom2.height;\n  }\n\n  return Math.hypot(disX, disY) < (dom.width + dom2.width) / 2;\n}\n\n// 创建一些食物\ncreateFood(foodsNum);\n\n// 动画逻辑\nvar timeout = 0;\nvar time = new Date();\nfunction animate() {\n  var ntime = new Date();\n\n  stats.begin();\n\n  if (ntime - time > timeout) {\n    _map2.default.clear();\n\n    // 让视窗跟随蛇的位置更改而更改\n    _frame2.default.track(snake);\n\n    _map2.default.render();\n\n    // 渲染食物, 以及检测食物与蛇头的碰撞\n    foods.slice(0).forEach(function (food) {\n      food.render();\n\n      if (food.visible && collision(snake.header, food)) {\n        foods.splice(foods.indexOf(food), 1);\n        snake.eat(food);\n        createFood(1);\n      }\n    });\n\n    snake.render();\n\n    _map2.default.renderSmallMap();\n\n    _map2.default.update();\n\n    time = ntime;\n  }\n\n  stats.end();\n\n  raf(animate);\n}\n\nanimate();\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/main.js\n ** module id = 1\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./src/main.js?");

/***/ },
/* 2 */
/***/ function(module, exports) {

	eval("// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel(\"FPS\",\"#0ff\",\"#002\")),f=h(new Stats.Panel(\"MS\",\"#0f0\",\"#020\"));\nif(self.performance&&self.performance.memory)var t=h(new Stats.Panel(\"MB\",\"#f08\",\"#201\"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};\nStats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=f;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,\nv){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+\" \"+h+\" (\"+e(c)+\"-\"+e(g)+\")\",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/stats.js/build/stats.min.js\n ** module id = 2\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./~/stats.js/build/stats.min.js?");

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(4);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _map = __webpack_require__(5);\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by wanghx on 4/23/16.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * snake\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar SPEED = 3;\nvar BASE_ANGLE = Math.PI * 200; // 用于保证蛇的角度一直都是正数\n\n// 蛇头和蛇身的基类\n\nvar SnakeBase = function (_Base) {\n  _inherits(SnakeBase, _Base);\n\n  function SnakeBase(options) {\n    _classCallCheck(this, SnakeBase);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SnakeBase).call(this, options));\n\n    var self = _this;\n\n    // 皮肤颜色\n    _this.color = options.color;\n    // 描边颜色\n    _this.color_2 = '#000';\n\n    // 垂直和水平速度\n    _this.vx = SPEED;\n    _this.vy = 0;\n\n    // 生成元素图片镜像\n    _this.createImage();\n\n    // 监听地图scale更改事件, 重绘镜像\n    _map2.default.on('scale_changed', function () {\n      self.createImage();\n    });\n    return _this;\n  }\n\n  // 设置基类的速度\n\n\n  _createClass(SnakeBase, [{\n    key: 'setSize',\n\n\n    /**\n     * 设置宽度和高度\n     * @param width\n     * @param height\n     */\n    value: function setSize(width, height) {\n      this.width = width;\n      this.height = height || width;\n      this.createImage();\n    }\n\n    /**\n     * 生成图片镜像\n     */\n\n  }, {\n    key: 'createImage',\n    value: function createImage() {\n      this.img = this.img || document.createElement('canvas');\n      this.img.width = this.paintWidth + 10;\n      this.img.height = this.paintHeight + 10;\n      this.imgctx = this.img.getContext('2d');\n\n      this.imgctx.lineWidth = 2;\n      this.imgctx.save();\n      this.imgctx.beginPath();\n      this.imgctx.arc(this.img.width / 2, this.img.height / 2, this.paintWidth / 2, 0, Math.PI * 2);\n      this.imgctx.fillStyle = this.color;\n      this.imgctx.strokeStyle = this.color_2;\n      this.imgctx.stroke();\n      this.imgctx.fill();\n      this.imgctx.restore();\n    }\n\n    /**\n     * 更新位置\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      this.x += this.vx;\n      this.y += this.vy;\n    }\n\n    /**\n     * 渲染镜像图片\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      this.update();\n\n      // 如果该元素在视窗内不可见, 则不进行绘制\n      if (!this.visible) return;\n\n      // 如果该对象有角度属性, 则使用translate来绘制, 因为要旋转\n      if (this.hasOwnProperty('angle')) {\n        _map2.default.ctx.save();\n        _map2.default.ctx.translate(this.paintX, this.paintY);\n        _map2.default.ctx.rotate(this.angle - BASE_ANGLE - Math.PI / 2);\n        _map2.default.ctx.drawImage(this.img, -this.img.width / 2, -this.img.height / 2);\n        _map2.default.ctx.restore();\n      } else {\n        _map2.default.ctx.drawImage(this.img, this.paintX - this.img.width / 2, this.paintY - this.img.height / 2);\n      }\n\n      // 绘制移动方向, debug用\n      //    map.ctx.beginPath();\n      //    map.ctx.moveTo(\n      //      this.paintX - (this.paintWidth * 0.5 * this.vx / this.speed),\n      //      this.paintY - (this.paintWidth * 0.5 * this.vy / this.speed)\n      //    );\n      //    map.ctx.lineTo(this.paintX, this.paintY);\n      //    map.ctx.strokeStyle = '#000';\n      //    map.ctx.stroke();\n    }\n  }, {\n    key: 'speed',\n    set: function set(val) {\n      this._speed = val;\n\n      // 重新计算水平垂直速度\n      this.velocity();\n    },\n    get: function get() {\n      return this._speed ? this._speed : this._speed = this.tracer ? this.tracer.speed : SPEED;\n    }\n  }]);\n\n  return SnakeBase;\n}(_base2.default);\n\n// 蛇的身躯类\n\n\nvar SnakeBody = function (_SnakeBase) {\n  _inherits(SnakeBody, _SnakeBase);\n\n  function SnakeBody(options) {\n    _classCallCheck(this, SnakeBody);\n\n    // 设置跟踪者\n\n    var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(SnakeBody).call(this, options));\n\n    _this2.tracer = options.tracer;\n\n    _this2.tracerDis = _this2.distance;\n\n    _this2.savex = _this2.tox = _this2.tracer.x - _this2.distance;\n    _this2.savey = _this2.toy = _this2.tracer.y;\n    return _this2;\n  }\n\n  _createClass(SnakeBody, [{\n    key: 'update',\n    value: function update() {\n      if (this.tracerDis >= this.distance) {\n        var tracer = this.tracer;\n\n        // 计算位置的偏移量\n        this.tox = this.savex + (this.tracerDis - this.distance) * tracer.vx / tracer.speed;\n        this.toy = this.savey + (this.tracerDis - this.distance) * tracer.vy / tracer.speed;\n\n        this.velocity(this.tox, this.toy);\n\n        this.tracerDis = 0;\n\n        // 保存tracer位置\n        this.savex = this.tracer.x;\n        this.savey = this.tracer.y;\n      }\n\n      this.tracerDis += this.tracer.speed;\n\n      if (Math.abs(this.tox - this.x) <= Math.abs(this.vx)) {\n        this.x = this.tox;\n      } else {\n        this.x += this.vx;\n      }\n\n      if (Math.abs(this.toy - this.y) <= Math.abs(this.vy)) {\n        this.y = this.toy;\n      } else {\n        this.y += this.vy;\n      }\n    }\n\n    /**\n     * 根据目标点, 计算速度\n     * @param x\n     * @param y\n     */\n\n  }, {\n    key: 'velocity',\n    value: function velocity(x, y) {\n      this.tox = x || this.tox;\n      this.toy = y || this.toy;\n\n      var disX = this.tox - this.x;\n      var disY = this.toy - this.y;\n      var dis = Math.hypot(disX, disY);\n\n      this.vx = this.speed * disX / dis || 0;\n      this.vy = this.speed * disY / dis || 0;\n    }\n  }, {\n    key: 'distance',\n    get: function get() {\n      return this.tracer.width * 0.2;\n    }\n  }]);\n\n  return SnakeBody;\n}(SnakeBase);\n\n// 蛇头类\n\n\nvar SnakeHeader = function (_SnakeBase2) {\n  _inherits(SnakeHeader, _SnakeBase2);\n\n  function SnakeHeader(options) {\n    _classCallCheck(this, SnakeHeader);\n\n    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(SnakeHeader).call(this, options));\n\n    _this3.angle = BASE_ANGLE + Math.PI / 2;\n    _this3.toAngle = _this3.angle;\n    return _this3;\n  }\n\n  /**\n   * 添加画眼睛的功能\n   */\n\n\n  _createClass(SnakeHeader, [{\n    key: 'createImage',\n    value: function createImage() {\n      _get(Object.getPrototypeOf(SnakeHeader.prototype), 'createImage', this).call(this);\n      var self = this;\n      var eyeRadius = this.paintWidth * 0.2;\n\n      function drawEye(eyeX, eyeY) {\n        self.imgctx.beginPath();\n        self.imgctx.fillStyle = '#fff';\n        self.imgctx.strokeStyle = self.color_2;\n        self.imgctx.arc(eyeX, eyeY, eyeRadius, 0, Math.PI * 2);\n        self.imgctx.fill();\n        self.imgctx.stroke();\n\n        self.imgctx.beginPath();\n        self.imgctx.fillStyle = '#000';\n        self.imgctx.arc(eyeX + eyeRadius / 2, eyeY, eyeRadius / 4, 0, Math.PI * 2);\n        self.imgctx.fill();\n      }\n\n      // 画左眼\n      drawEye(this.img.width / 2 + this.paintWidth / 2 - eyeRadius, this.img.height / 2 - this.paintHeight / 2 + eyeRadius);\n\n      // 画右眼\n      drawEye(this.img.width / 2 + this.paintWidth / 2 - eyeRadius, this.img.height / 2 + this.paintHeight / 2 - eyeRadius);\n    }\n\n    /**\n     * 转向某个角度\n     */\n\n  }, {\n    key: 'directTo',\n    value: function directTo(angle) {\n      // 老的目标角度, 但是是小于360度的, 因为每次计算出来的目标角度也是0 - 360度\n      var oldAngle = Math.abs(this.toAngle % (Math.PI * 2));\n\n      // 转了多少圈\n      var rounds = ~ ~(this.toAngle / (Math.PI * 2));\n\n      this.toAngle = angle;\n\n      if (oldAngle >= Math.PI * 3 / 2 && this.toAngle <= Math.PI / 2) {\n        // 角度从第四象限左划至第一象限, 增加圈数\n        rounds++;\n      } else if (oldAngle <= Math.PI / 2 && this.toAngle >= Math.PI * 3 / 2) {\n        // 角度从第一象限划至第四象限, 减少圈数\n        rounds--;\n      }\n\n      // 计算真实要转到的角度\n      this.toAngle += rounds * Math.PI * 2;\n    }\n\n    // 根据蛇头角度计算水平速度和垂直速度\n\n  }, {\n    key: 'velocity',\n    value: function velocity() {\n      var angle = this.angle % (Math.PI * 2);\n      var vx = Math.abs(this.speed * Math.sin(angle));\n      var vy = Math.abs(this.speed * Math.cos(angle));\n\n      if (angle < Math.PI / 2) {\n        this.vx = vx;\n        this.vy = -vy;\n      } else if (angle < Math.PI) {\n        this.vx = vx;\n        this.vy = vy;\n      } else if (angle < Math.PI * 3 / 2) {\n        this.vx = -vx;\n        this.vy = vy;\n      } else {\n        this.vx = -vx;\n        this.vy = -vy;\n      }\n    }\n\n    /**\n     * 增加蛇头的逐帧逻辑\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      this.turnAround();\n\n      this.velocity();\n\n      _get(Object.getPrototypeOf(SnakeHeader.prototype), 'update', this).call(this);\n\n      // 不让蛇走出边界\n      var whalf = this.width / 2;\n      if (this.x < whalf) {\n        this.x = whalf;\n      } else if (this.x + whalf > _map2.default.width) {\n        this.x = _map2.default.width - whalf;\n      }\n\n      var hhalf = this.height / 2;\n      if (this.y < hhalf) {\n        this.y = hhalf;\n      } else if (this.y + hhalf > _map2.default.height) {\n        this.y = _map2.default.height - hhalf;\n      }\n    }\n\n    /**\n     * 蛇头转头\n     */\n\n  }, {\n    key: 'turnAround',\n    value: function turnAround() {\n      var angleDistance = this.toAngle - this.angle; // 与目标角度之间的角度差\n      var turnSpeed = 0.045; // 转头速度\n\n      // 当转到目标角度, 重置蛇头角度\n      if (Math.abs(angleDistance) <= turnSpeed) {\n        this.toAngle = this.angle = BASE_ANGLE + this.toAngle % (Math.PI * 2);\n      } else {\n        this.angle += Math.sign(angleDistance) * turnSpeed;\n      }\n    }\n  }]);\n\n  return SnakeHeader;\n}(SnakeBase);\n\n// 蛇类\n\n\nvar Snake = function () {\n  function Snake(options) {\n    _classCallCheck(this, Snake);\n\n    this.bodys = [];\n    this.point = 0;\n\n    // 创建脑袋\n    this.header = new SnakeHeader(options);\n\n    // 创建身躯, 给予各个身躯跟踪目标\n    options.tracer = this.header;\n    for (var i = 0; i < options.length; i++) {\n      this.bodys.push(options.tracer = new SnakeBody(options));\n    }\n\n    this.binding();\n  }\n\n  _createClass(Snake, [{\n    key: 'binding',\n\n\n    /**\n     * 蛇与鼠标的交互事件\n     */\n    value: function binding() {\n      var self = this;\n\n      if (navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)) {\n        window.addEventListener('touchmove', function (e) {\n          e.preventDefault();\n          self.moveTo(e.touches[0].pageX, e.touches[0].pageY);\n        });\n\n        window.addEventListener('touchstart', function (e) {\n          e.preventDefault();\n          self.moveTo(e.touches[0].pageX, e.touches[0].pageY);\n        });\n      } else {\n        // 蛇头跟随鼠标的移动而变更移动方向\n        window.addEventListener('mousemove', function () {\n          var e = arguments.length <= 0 || arguments[0] === undefined ? window.event : arguments[0];\n          return self.moveTo(e.clientX, e.clientY);\n        });\n\n        // 鼠标按下让蛇加速\n        window.addEventListener('mousedown', self.speedUp.bind(self));\n\n        // 鼠标抬起停止加速\n        window.addEventListener('mouseup', self.speedDown.bind(self));\n      }\n    }\n\n    /**\n     * 加速\n     */\n\n  }, {\n    key: 'speedUp',\n    value: function speedUp() {\n      this.header.speed = 5;\n      this.bodys.forEach(function (body) {\n        body.speed = 5;\n      });\n    }\n\n    /**\n     * 恢复原速度\n     */\n\n  }, {\n    key: 'speedDown',\n    value: function speedDown() {\n      this.header.speed = SPEED;\n      this.bodys.forEach(function (body) {\n        body.speed = SPEED;\n      });\n    }\n\n    /**\n     * 根据传入坐标, 获取坐标点相对于蛇的角度\n     * @param x\n     * @param y\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(nx, ny) {\n      var x = nx - this.header.paintX;\n      var y = this.header.paintY - ny;\n      var angle = Math.atan(Math.abs(x / y));\n\n      // 计算角度, 角度值为 0-360\n      if (x > 0 && y < 0) {\n        angle = Math.PI - angle;\n      } else if (x < 0 && y < 0) {\n        angle = Math.PI + angle;\n      } else if (x < 0 && y > 0) {\n        angle = Math.PI * 2 - angle;\n      }\n\n      this.header.directTo(angle);\n    }\n\n    /**\n     * 吃掉食物\n     * @param food\n     */\n\n  }, {\n    key: 'eat',\n    value: function eat(food) {\n      this.foodNum = this.foodNum || 0;\n      this.point += food.point;\n      this.foodNum++;\n\n      // 增加分数引起虫子体积增大\n      var added = food.point / 100;\n      var newSize = this.header.width + added;\n      this.header.setSize(newSize);\n      this.bodys.forEach(function (body) {\n        body.setSize(newSize);\n      });\n\n      // 调整地图缩放比例\n      _map2.default.setScale(_map2.default.scale + added / (this.header.width * 3));\n\n      // 每吃两个个食物, 都增加一截身躯\n      if (this.foodNum % 2 === 0) {\n        var lastBody = this.bodys[this.bodys.length - 1];\n        this.bodys.push(new SnakeBody({\n          x: lastBody.x,\n          y: lastBody.y,\n          size: lastBody.width,\n          color: lastBody.color,\n          tracer: lastBody\n        }));\n      }\n    }\n\n    // 渲染蛇头蛇身\n\n  }, {\n    key: 'render',\n    value: function render() {\n      for (var i = this.bodys.length - 1; i >= 0; i--) {\n        this.bodys[i].render();\n      }\n\n      this.header.render();\n    }\n  }, {\n    key: 'x',\n    get: function get() {\n      return this.header.x;\n    }\n  }, {\n    key: 'y',\n    get: function get() {\n      return this.header.y;\n    }\n  }]);\n\n  return Snake;\n}();\n\nexports.default = Snake;\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/snake.js\n ** module id = 3\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./src/lib/snake.js?");

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by wanghx on 4/27/16.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * base    地图上的元素基础类, 默认为圆\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 基础属性:\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - x             元素的中心点x坐标\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - y             元素的中心店y坐标\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - width         元素宽度\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - height        元素高度\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - paintX        元素的绘制坐标\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - paintY        元素的绘制坐标\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - paintWidth    元素的绘制宽度\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - paintHeight   元素的绘制高度\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - visible       元素是否在视窗内可见\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _map = __webpack_require__(5);\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _frame = __webpack_require__(6);\n\nvar _frame2 = _interopRequireDefault(_frame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n  function Base(options) {\n    _classCallCheck(this, Base);\n\n    this.x = options.x;\n    this.y = options.y;\n    this.width = options.size || options.width;\n    this.height = options.size || options.height;\n  }\n\n  /**\n   * 绘制时的x坐标, 要根据视窗来计算位置\n   * @returns {number}\n   */\n\n\n  _createClass(Base, [{\n    key: 'paintX',\n    get: function get() {\n      return _map2.default.relative(this.x) - _frame2.default.x;\n    }\n\n    /**\n     * 绘制时的y坐标, 要根据视窗来计算位置\n     * @returns {number}\n     */\n\n  }, {\n    key: 'paintY',\n    get: function get() {\n      return _map2.default.relative(this.y) - _frame2.default.y;\n    }\n\n    /**\n     * 绘制宽度\n     * @returns {*}\n     */\n\n  }, {\n    key: 'paintWidth',\n    get: function get() {\n      return _map2.default.relative(this.width);\n    }\n\n    /**\n     * 绘制高度\n     * @returns {*}\n     */\n\n  }, {\n    key: 'paintHeight',\n    get: function get() {\n      return _map2.default.relative(this.height);\n    }\n\n    /**\n     * 在视窗内是否可见\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'visible',\n    get: function get() {\n      var paintX = this.paintX;\n      var paintY = this.paintY;\n      var halfWidth = this.paintWidth / 2;\n      var halfHeight = this.paintHeight / 2;\n\n      return paintX + halfWidth > 0 && paintX - halfWidth < _frame2.default.width && paintY + halfHeight > 0 && paintY - halfHeight < _frame2.default.height;\n    }\n  }]);\n\n  return Base;\n}();\n\nexports.default = Base;\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/base.js\n ** module id = 4\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./src/lib/base.js?");

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _frame = __webpack_require__(6);\n\nvar _frame2 = _interopRequireDefault(_frame);\n\nvar _eventemitter = __webpack_require__(7);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by wanghx on 4/25/16.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 地图类 由于地图在整个游戏中只有一个, 所以做成单例\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n// 地图类\n\nvar Map = function (_EventEmitter) {\n  _inherits(Map, _EventEmitter);\n\n  function Map() {\n    _classCallCheck(this, Map);\n\n    // 背景块的大小\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Map).call(this));\n\n    _this.blockWidth = 150;\n    _this.blockHeight = 150;\n    return _this;\n  }\n\n  /**\n   * 初始化map对象\n   * @param options\n   */\n\n\n  _createClass(Map, [{\n    key: 'init',\n    value: function init(options) {\n      this.canvas = options.canvas;\n      this.ctx = this.canvas.getContext('2d');\n\n      // 地图大小\n      this.width = options.width;\n      this.height = options.height;\n\n      // 地图比例\n      this.scale = options.scale || 1;\n    }\n\n    /**\n     * 设置缩放比例\n     * @param value\n     */\n\n  }, {\n    key: 'setScale',\n    value: function setScale(scale) {\n      this.toScale = scale;\n    }\n\n    /**\n     * 清空地图上的内容\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.ctx.clearRect(0, 0, _frame2.default.width, _frame2.default.height);\n    }\n\n    /**\n     * 相对于地图scale的值\n     * @param val\n     * @returns {*}\n     */\n\n  }, {\n    key: 'relative',\n    value: function relative(val) {\n      return val + val * (1 - this.scale);\n    }\n\n    /**\n     * 对地图本身的更新都在此处进行\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      if (this.toScale && this.scale !== this.toScale) {\n        this.scale = this.toScale;\n      }\n    }\n\n    /**\n     * 渲染地图\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      this.ctx.save();\n      var beginX = _frame2.default.x < 0 ? -_frame2.default.x : -_frame2.default.x % this.paintBlockWidth;\n      var beginY = _frame2.default.y < 0 ? -_frame2.default.y : -_frame2.default.y % this.paintBlockHeight;\n      var endX = _frame2.default.x + _frame2.default.width > this.paintWidth ? this.paintWidth - _frame2.default.x : beginX + _frame2.default.width + this.paintBlockWidth;\n      var endY = _frame2.default.y + _frame2.default.height > this.paintHeight ? this.paintHeight - _frame2.default.y : beginY + _frame2.default.height + this.paintBlockHeight;\n\n      // 铺底色\n      this.ctx.fillStyle = '#999';\n      this.ctx.fillRect(beginX, beginY, endX - beginX, endY - beginY);\n\n      // 画方格砖\n      this.ctx.lineWidth = 0.5;\n      this.ctx.strokeStyle = '#fff';\n      for (var x = beginX; x <= endX; x += this.paintBlockWidth) {\n        for (var y = beginY; y <= endY; y += this.paintBlockWidth) {\n          var cx = endX - x;\n          var cy = endY - y;\n          var w = cx < this.paintBlockWidth ? cx : this.paintBlockWidth;\n          var h = cy < this.paintBlockHeight ? cy : this.paintBlockHeight;\n\n          this.ctx.strokeRect(x, y, w, h);\n        }\n      }\n\n      this.ctx.restore();\n    }\n\n    /**\n     * 画小地图\n     */\n\n  }, {\n    key: 'renderSmallMap',\n    value: function renderSmallMap() {\n      // 小地图外壳, 圆圈\n      var margin = 30;\n      var smapr = 50;\n      var smapx = _frame2.default.width - smapr - margin;\n      var smapy = _frame2.default.height - smapr - margin;\n\n      // 地图在小地图中的位置和大小\n      var smrect = 50;\n      var smrectw = this.paintWidth > this.paintHeight ? smrect : this.paintWidth * smrect / this.paintHeight;\n      var smrecth = this.paintWidth > this.paintHeight ? this.paintHeight * smrect / this.paintWidth : smrect;\n      var smrectx = smapx - smrectw / 2;\n      var smrecty = smapy - smrecth / 2;\n\n      // 相对比例\n      var radio = smrectw / this.paintWidth;\n\n      // 视窗在小地图中的位置和大小\n      var smframex = _frame2.default.x * radio + smrectx;\n      var smframey = _frame2.default.y * radio + smrecty;\n      var smframew = _frame2.default.width * radio;\n      var smframeh = _frame2.default.height * radio;\n\n      this.ctx.save();\n      this.ctx.globalAlpha = 0.8;\n\n      // 画个圈先\n      this.ctx.beginPath();\n      this.ctx.arc(smapx, smapy, smapr, 0, Math.PI * 2);\n      this.ctx.fillStyle = '#000';\n      this.ctx.fill();\n      this.ctx.stroke();\n\n      // 画缩小版地图\n      this.ctx.fillStyle = '#999';\n      this.ctx.fillRect(smrectx, smrecty, smrectw, smrecth);\n\n      // 画视窗\n      //    this.ctx.strokeRect(smframex, smframey, smframew, smframeh);\n\n      this.ctx.restore();\n\n      // 画蛇蛇位置\n      this.ctx.fillStyle = '#fff';\n      this.ctx.fillRect(smframex + smframew / 2 - 2, smframey + smframeh / 2 - 2, 4, 4);\n    }\n  }, {\n    key: 'scale',\n    set: function set(value) {\n      if (value >= 1.6 || value < 1 || this._scale === value) {\n        return;\n      }\n\n      this._scale = value;\n\n      this.paintBlockWidth = this.relative(this.blockWidth);\n      this.paintBlockHeight = this.relative(this.blockHeight);\n      this.paintWidth = this.relative(this.width);\n      this.paintHeight = this.relative(this.height);\n\n      this.emit('scale_changed');\n    },\n    get: function get() {\n      return this._scale;\n    }\n  }]);\n\n  return Map;\n}(_eventemitter2.default);\n\nexports.default = new Map();\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/map.js\n ** module id = 5\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./src/lib/map.js?");

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by wanghx on 4/27/16.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 视窗类 由于视窗在整个游戏中只有一个, 所以做成单例\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _map = __webpack_require__(5);\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// 视窗类\n\nvar Frame = function () {\n  function Frame() {\n    _classCallCheck(this, Frame);\n  }\n\n  _createClass(Frame, [{\n    key: 'init',\n    value: function init(options) {\n      var self = this;\n\n      this.x = options.x;\n      this.y = options.y;\n      this.width = options.width;\n      this.height = options.height;\n\n      _map2.default.on('scale_changed', function () {\n        self.x = _map2.default.relative(self.x);\n        self.y = _map2.default.relative(self.y);\n      });\n    }\n\n    /**\n     * 跟踪某个对象\n     */\n\n  }, {\n    key: 'track',\n    value: function track(obj) {\n      this.translate(_map2.default.relative(obj.x) - this.x - this.width / 2, _map2.default.relative(obj.y) - this.y - this.height / 2);\n    }\n\n    /**\n     * 移动视窗\n     * @param x\n     * @param y\n     */\n\n  }, {\n    key: 'translate',\n    value: function translate(x, y) {\n      this.x += x;\n      this.y += y;\n    }\n  }]);\n\n  return Frame;\n}();\n\nexports.default = new Frame();\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/frame.js\n ** module id = 6\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./src/lib/frame.js?");

/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} [once=false] Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Hold the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var events = this._events\n    , names = []\n    , name;\n\n  if (!events) return names;\n\n  for (name in events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/eventemitter3/index.js\n ** module id = 7\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./~/eventemitter3/index.js?");

/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(4);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _map = __webpack_require__(5);\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Created by wanghx on 4/27/16.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * food\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Food = function (_Base) {\n  _inherits(Food, _Base);\n\n  function Food(options) {\n    _classCallCheck(this, Food);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Food).call(this, options));\n\n    _this.point = options.point;\n    _this.lightSize = _this.width / 2; // 食物的半径, 发光半径\n    _this.lightDirection = true; // 发光动画方向\n    return _this;\n  }\n\n  _createClass(Food, [{\n    key: 'update',\n    value: function update() {\n      var lightSpeed = 1;\n\n      this.lightSize += this.lightDirection ? lightSpeed : -lightSpeed;\n\n      // 当发光圈到达一定值再缩小\n      if (this.lightSize > this.width || this.lightSize < this.width / 2) {\n        this.lightDirection = !this.lightDirection;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!this.visible) {\n        return;\n      }\n\n      this.update();\n\n      _map2.default.ctx.fillStyle = '#fff';\n\n      // 绘制光圈\n      _map2.default.ctx.globalAlpha = 0.2;\n      _map2.default.ctx.beginPath();\n      _map2.default.ctx.arc(this.paintX, this.paintY, this.lightSize * this.paintWidth / this.width, 0, Math.PI * 2);\n      _map2.default.ctx.fill();\n\n      // 绘制实体\n      _map2.default.ctx.globalAlpha = 1;\n      _map2.default.ctx.beginPath();\n      _map2.default.ctx.arc(this.paintX, this.paintY, this.paintWidth / 2, 0, Math.PI * 2);\n      _map2.default.ctx.fill();\n    }\n  }]);\n\n  return Food;\n}(_base2.default);\n\nexports.default = Food;\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/lib/food.js\n ** module id = 8\n ** module chunks = 0\n **/\n//# sourceURL=webpack:///./src/lib/food.js?");

/***/ }
/******/ ]);
</script>
</body>
</html>